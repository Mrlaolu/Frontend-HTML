<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}iCalligraphy · 发现与分享书法之美{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/main.css" />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="/"><span class="brand-logo">藝</span><span class="brand-text">iCalligraphy</span></a>
        <nav class="nav">
          <a href="/" {% if active_page == 'index' %}class="active"{% endif %}>首页</a>
          <a href="/work-upload" {% if active_page == 'work_upload' %}class="active"{% endif %}>作品上传</a>
          <a href="/search" {% if active_page == 'search' %}class="active"{% endif %}>检索</a>
          <a href="/my-collections" {% if active_page == 'my_collections' %}class="active"{% endif %}>我的字集</a>
          <a href="/read-post" {% if active_page == 'read_post' %}class="active"{% endif %}>读帖</a>
          <a href="/profile" {% if active_page == 'profile' %}class="active"{% endif %}>个人中心</a>
          <a href="/community" {% if active_page == 'community' %}class="active"{% endif %}>社区</a>
          <a href="/review-center" {% if active_page == 'review_center' %}class="active"{% endif %}>审核中心</a>
          <div class="nav-auth">
            <a href="/auth" class="btn btn-outline">登录/注册</a>
          </div>
        </nav>
      </div>
    </header>

    {% block content %}
    {% endblock %}

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© 2025 iCalligraphy · 传统与创新并重</p>
        {% block footer_note %}
        <p class="note">本页为示例界面，真实数据与交互将在后续接入。</p>
        {% endblock %}
      </div>
    </footer>

    <script src="/static/js/main.js" defer></script>
    <script src="/static/js/auth.js" defer></script>
    {% block extra_js %}{% endblock %}
  </body>
  <style>
    .nav-auth {
      margin-left: auto;
    }
    .user-menu-container {
      position: relative;
    }
    .user-menu-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: none;
      border: 1px solid #e8e8e8;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .user-menu-btn:hover {
      border-color: #1890ff;
      color: #1890ff;
    }
    .user-avatar {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background-color: #1890ff;
      color: white;
      border-radius: 50%;
      font-size: 14px;
      font-weight: 600;
    }
    .user-dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 4px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      min-width: 240px;
      z-index: 1000;
      display: none;
    }
    .user-dropdown-menu.active {
      display: block;
    }
    .user-info {
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .user-avatar-large {
      width: 48px;
      height: 48px;
      background-color: #1890ff;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 600;
    }
    .user-details {
      flex: 1;
    }
    .user-fullname {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .user-email {
      font-size: 12px;
      color: #8c8c8c;
    }
    .dropdown-divider {
      height: 1px;
      background-color: #f0f0f0;
    }
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }
    .dropdown-item:hover {
      background-color: #f5f5f5;
    }
    .dropdown-item.logout-btn {
      color: #ff4d4f;
    }
    .dropdown-item svg {
      flex-shrink: 0;
    }
  </style>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>我的字集 · iCalligraphy</title>
    <link rel="stylesheet" href="../static/css/main.css" />
    <link rel="stylesheet" href="../static/css/my_collections.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="index.html"><span class="brand-logo">藝</span><span class="brand-text">iCalligraphy</span></a>
        <nav class="nav">
          <a href="index.html">首页</a>
          <a href="work_upload.html">作品上传</a>
          <a href="search.html">检索</a>
          <a href="my_collections.html" class="active">我的字集</a>
          <a href="profile.html">个人中心</a>
          <a href="community.html">社区</a>
          <a href="review_center.html">审核中心</a>
          <a href="auth.html" class="auth-link">登录/注册</a>
        </nav>
      </div>
    </header>

    <main class="container collections-main">
      <!-- 页面标题与操作栏 -->
      <section class="collections-header">
        <div class="header-content">
          <h1>我的字集</h1>
          <p class="subtitle">管理你的专属字集，从作品中精选单字，构建个人字库</p>
        </div>
        <button type="button" id="createCollectionBtn" class="btn btn-primary">
          <span class="btn-icon">+</span>
          <span class="btn-text">创建字集</span>
        </button>
      </section>

      <!-- 字集统计 -->
      <section class="collections-stats">
        <div class="stat-card">
          <div class="stat-value" id="totalCollections">3</div>
          <div class="stat-label">字集总数</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalCharacters">128</div>
          <div class="stat-label">单字总数</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="recentUpdates">2</div>
          <div class="stat-label">今日更新</div>
        </div>
      </section>

      <!-- 筛选与搜索 -->
      <section class="collections-toolbar">
        <div class="toolbar-filters">
          <div class="filter-group">
            <label for="sortSelect" class="label">排序：</label>
            <select id="sortSelect" class="select-field">
              <option value="recent">最近更新</option>
              <option value="name">按名称</option>
              <option value="count">按字数</option>
              <option value="created">创建时间</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="styleFilter" class="label">风格：</label>
            <select id="styleFilter" class="select-field">
              <option value="all">全部风格</option>
              <option value="kai">楷书</option>
              <option value="xing">行书</option>
              <option value="cao">草书</option>
              <option value="li">隶书</option>
              <option value="zhuan">篆书</option>
            </select>
          </div>
        </div>
        <div class="toolbar-search">
          <input type="search" id="collectionSearch" class="search-input" placeholder="搜索字集名称或单字..." />
        </div>
      </section>

      <!-- 字集列表 -->
      <section class="collections-list" id="collectionsList">
        <!-- 字集卡片 1 -->
        <article class="collection-card">
          <div class="collection-header">
            <div class="collection-info">
              <h3 class="collection-name">常用楷书字</h3>
              <p class="collection-meta">72个字 · 楷书 · 更新于 2小时前</p>
            </div>
            <div class="collection-actions">
              <button type="button" class="action-btn" data-action="edit" aria-label="编辑字集">
                <span class="action-icon">✏️</span>
              </button>
              <button type="button" class="action-btn" data-action="delete" aria-label="删除字集">
                <span class="action-icon">🗑️</span>
              </button>
            </div>
          </div>
          <div class="collection-preview">
            <!-- 单字预览网格 -->
            <div class="char-grid">
              <div class="char-item" data-char="永">
                <span class="char-display">永</span>
              </div>
              <div class="char-item" data-char="字">
                <span class="char-display">字</span>
              </div>
              <div class="char-item" data-char="书">
                <span class="char-display">书</span>
              </div>
              <div class="char-item" data-char="法">
                <span class="char-display">法</span>
              </div>
              <div class="char-item" data-char="艺">
                <span class="char-display">艺</span>
              </div>
              <div class="char-item" data-char="术">
                <span class="char-display">术</span>
              </div>
              <div class="char-more">+66</div>
            </div>
          </div>
          <div class="collection-footer">
            <button type="button" class="btn btn-secondary btn-small" data-collection="1">查看详情</button>
            <button type="button" class="btn btn-outline btn-small" data-collection="1">添加单字</button>
          </div>
        </article>

        <!-- 字集卡片 2 -->
        <article class="collection-card">
          <div class="collection-header">
            <div class="collection-info">
              <h3 class="collection-name">行书精选</h3>
              <p class="collection-meta">43个字 · 行书 · 更新于 1天前</p>
            </div>
            <div class="collection-actions">
              <button type="button" class="action-btn" data-action="edit" aria-label="编辑字集">
                <span class="action-icon">✏️</span>
              </button>
              <button type="button" class="action-btn" data-action="delete" aria-label="删除字集">
                <span class="action-icon">🗑️</span>
              </button>
            </div>
          </div>
          <div class="collection-preview">
            <div class="char-grid">
              <div class="char-item" data-char="兰">
                <span class="char-display">兰</span>
              </div>
              <div class="char-item" data-char="亭">
                <span class="char-display">亭</span>
              </div>
              <div class="char-item" data-char="序">
                <span class="char-display">序</span>
              </div>
              <div class="char-item" data-char="集">
                <span class="char-display">集</span>
              </div>
              <div class="char-item" data-char="王">
                <span class="char-display">王</span>
              </div>
              <div class="char-item" data-char="羲">
                <span class="char-display">羲</span>
              </div>
              <div class="char-more">+37</div>
            </div>
          </div>
          <div class="collection-footer">
            <button type="button" class="btn btn-secondary btn-small" data-collection="2">查看详情</button>
            <button type="button" class="btn btn-outline btn-small" data-collection="2">添加单字</button>
          </div>
        </article>

        <!-- 字集卡片 3 -->
        <article class="collection-card">
          <div class="collection-header">
            <div class="collection-info">
              <h3 class="collection-name">草书练习</h3>
              <p class="collection-meta">13个字 · 草书 · 更新于 3天前</p>
            </div>
            <div class="collection-actions">
              <button type="button" class="action-btn" data-action="edit" aria-label="编辑字集">
                <span class="action-icon">✏️</span>
              </button>
              <button type="button" class="action-btn" data-action="delete" aria-label="删除字集">
                <span class="action-icon">🗑️</span>
              </button>
            </div>
          </div>
          <div class="collection-preview">
            <div class="char-grid">
              <div class="char-item" data-char="草">
                <span class="char-display">草</span>
              </div>
              <div class="char-item" data-char="书">
                <span class="char-display">书</span>
              </div>
              <div class="char-item" data-char="神">
                <span class="char-display">神</span>
              </div>
              <div class="char-item" data-char="韵">
                <span class="char-display">韵</span>
              </div>
              <div class="char-item" data-char="飞">
                <span class="char-display">飞</span>
              </div>
              <div class="char-item" data-char="舞">
                <span class="char-display">舞</span>
              </div>
              <div class="char-more">+7</div>
            </div>
          </div>
          <div class="collection-footer">
            <button type="button" class="btn btn-secondary btn-small" data-collection="3">查看详情</button>
            <button type="button" class="btn btn-outline btn-small" data-collection="3">添加单字</button>
          </div>
        </article>
      </section>

      <!-- 空状态（当没有字集时显示） -->
      <section class="empty-state hidden" id="emptyState">
        <div class="empty-content">
          <div class="empty-icon">📚</div>
          <h2>还没有字集</h2>
          <p>创建你的第一个字集，开始收藏喜欢的单字吧</p>
          <button type="button" class="btn btn-primary btn-large" id="createFirstBtn">创建字集</button>
        </div>
      </section>
    </main>

    <!-- 创建/编辑字集弹窗 -->
    <div class="modal hidden" id="collectionModal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
      <div class="modal-overlay" id="modalOverlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">创建字集</h2>
          <button type="button" class="modal-close" id="modalClose" aria-label="关闭">×</button>
        </div>
        <div class="modal-body">
          <form id="collectionForm" class="form">
            <div class="form-group">
              <label for="collectionName" class="form-label">字集名称 <span class="required">*</span></label>
              <input type="text" id="collectionName" class="form-input" placeholder="如：常用楷书字" maxlength="50" required />
            </div>
            <div class="form-group">
              <label for="collectionDesc" class="form-label">描述（选填）</label>
              <textarea id="collectionDesc" class="form-textarea" placeholder="简单描述这个字集的用途..." rows="3" maxlength="200"></textarea>
            </div>
            <div class="form-group">
              <label for="collectionStyle" class="form-label">主要风格</label>
              <select id="collectionStyle" class="form-select">
                <option value="">不限</option>
                <option value="kai">楷书</option>
                <option value="xing">行书</option>
                <option value="cao">草书</option>
                <option value="li">隶书</option>
                <option value="zhuan">篆书</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">可见性</label>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="visibility" value="private" checked />
                  <span>私密（仅自己可见）</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="visibility" value="public" />
                  <span>公开（所有人可见）</span>
                </label>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modalCancel">取消</button>
          <button type="button" class="btn btn-primary" id="modalConfirm">确定</button>
        </div>
      </div>
    </div>

    <!-- 字集详情弹窗 -->
    <div class="modal hidden" id="detailModal" role="dialog" aria-labelledby="detailTitle" aria-modal="true">
      <div class="modal-overlay" id="detailOverlay"></div>
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 id="detailTitle">常用楷书字</h2>
          <button type="button" class="modal-close" id="detailClose" aria-label="关闭">×</button>
        </div>
        <div class="modal-body">
          <!-- 单字筛选工具栏 -->
          <div class="detail-toolbar">
            <div class="detail-search">
              <input type="search" id="charSearch" class="search-input" placeholder="搜索单字..." />
            </div>
            <div class="detail-actions">
              <button type="button" class="btn btn-outline btn-small" id="selectModeBtn">批量选择</button>
              <button type="button" class="btn btn-outline btn-small" id="exportBtn">导出</button>
            </div>
          </div>

          <!-- 单字网格（详细视图） -->
          <div class="detail-char-grid" id="detailCharGrid">
            <div class="detail-char-item" data-char="永">
              <div class="char-card">
                <div class="char-image" aria-hidden="true"></div>
                <div class="char-label">永</div>
                <div class="char-source">王羲之 · 兰亭序</div>
                <button type="button" class="char-remove" aria-label="移除" title="从字集中移除">×</button>
              </div>
            </div>
            <div class="detail-char-item" data-char="字">
              <div class="char-card">
                <div class="char-image" aria-hidden="true"></div>
                <div class="char-label">字</div>
                <div class="char-source">颜真卿 · 多宝塔碑</div>
                <button type="button" class="char-remove" aria-label="移除" title="从字集中移除">×</button>
              </div>
            </div>
            <div class="detail-char-item" data-char="书">
              <div class="char-card">
                <div class="char-image" aria-hidden="true"></div>
                <div class="char-label">书</div>
                <div class="char-source">欧阳询 · 九成宫</div>
                <button type="button" class="char-remove" aria-label="移除" title="从字集中移除">×</button>
              </div>
            </div>
            <div class="detail-char-item" data-char="法">
              <div class="char-card">
                <div class="char-image" aria-hidden="true"></div>
                <div class="char-label">法</div>
                <div class="char-source">柳公权 · 玄秘塔碑</div>
                <button type="button" class="char-remove" aria-label="移除" title="从字集中移除">×</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© 2025 iCalligraphy · 传统与创新并重</p>
        <p class="note">本页为示例界面，真实数据与交互将在后续接入。</p>
      </div>
    </footer>

    <script src="../static/js/main.js" defer></script>
    <script src="../static/js/my_collections.js" defer></script>
  </body>
</html>